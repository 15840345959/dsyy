<import src="../templates/bookInfoTpl/bookInfoTpl.wxml" />
<import src="../templates/barInfoTpl/barInfoTpl.wxml" />

<view class="page">
  <!--页头-->
  <view class="page__hd"></view>
  <!--主体-->
  <view class="page__bd page__bd_spacing">
    <!-- 推荐 -->
    <view class="navbar white-bg">
      <view class="navbar-item font-size-14" wx:for="{{navbar}}" wx:for-index="idx" data-idx="{{idx}}" bindtap="swichNav">
        <text class="navbar-text {{currentNavbar==idx ? 'active' : ''}}">{{item}}</text>
      </view>
    </view>
    <!--占位用80rpx-->
    <view style="height:100rpx;"></view>

    <swiper bindchange="changeSwiper" class="swiper" current="{{currentNavbar}}" duration="300" style="height:{{systemInfo.windowHeight}}px">
      <!--推荐部分-->
      <swiper-item>
        <scroll-view class="hot-item-container" style="height: {{systemInfo.windowHeight}}px;" scroll-y="true" bindscrolltolower="">
          <!--轮播广告图-->
          <swiper indicator-dots="true" indicator-color="rgba(255, 255, 255, .3)" indicator-active-color="#FFFFFF" autoplay="true" interval="4000" duration="600" style="height:{{systemInfo.windowWidth/2}}px">
            <block wx:for="{{swipers}}">
              <swiper-item>
                <image src="{{item.img}}" class="slide-image" width="750rpx" />
              </swiper-item>
            </block>
          </swiper>
          <view class="white-bg margin-top-20">
            <view wx:if="{{indexPage.bookInfos}}" class="book border-bottom margin-left-40 margin-right-40 padding-top-10 padding-bottom-10 margin-top-10 line-text weui-flex font-weight" bindtap="seeMoreBook">
              <view class="weui-flex__item">新书推荐</view>
              <view class="weui-flex__item text-right">更多</view>
            </view>
            <view>
              <block wx:for="{{indexPage.bookInfos}}">
                <template is="bookInfoIndex" data="{{...item}}" />
              </block>
            </view>
          </view>
          <view class="white-bg margin-top-20 margin-bottom-30">
            <view wx:if="{{indexPage.barInfos}}" class="book border-bottom margin-left-40 margin-right-40 padding-top-10 padding-bottom-10 margin-top-10 line-text weui-flex font-weight" bindtap="seeMoreBar">
              <view class="weui-flex__item">附近书吧</view>
              <view class="weui-flex__item text-right">更多</view>
            </view>
            <view>
              <block wx:for="{{indexPage.barInfos}}">
                <template is="barInfoIndex2" data="{{...item}}" />
              </block>
            </view>
          </view>
        </scroll-view>
      </swiper-item>

      <!--图书部分-->
      <swiper-item>
        <!--搜索框-->
        <view class="index-search-botton white-bg margin-top-20"  catchtap="clickSearch">
          <view class="index-search-input">
            <view class="index-search-bar__box weui-flex">
              <view class="bar-img weui-flex__item">
                <text class="index-search-font">搜索你喜欢的书籍</text>
              </view>
              <view class="bar-img weui-flex__item text-right padding-top-5" >
                <image src="../../images/search_icon.png" class="opt-icon-sma"></image>
              </view>
            </view>
          </view>
        </view>
        <!--<view style="height:50rpx;"></view>-->
        <!--图书列表-->
        <scroll-view class="hot-item-container" style="height: {{systemInfo.windowHeight-80}}px;" scroll-y="true" bindscrolltolower="loadMoreDatas">
          <view class="white-bg">
            <block wx:for="{{bookInfos}}">
              <template is="bookInfoIndex" data="{{...item}}" />
            </block>
          </view>
        </scroll-view>
      </swiper-item>

      <!--书吧部分-->
      <swiper-item>
        <scroll-view class="hot-item-container" style="height: {{systemInfo.windowHeight}}px;" scroll-y="true" bindscrolltolower="loadMoreDatas">
          <block wx:for="{{barInfos}}">
            <template is="barInfoIndexs" data="{{...item}}" />
          </block>
        </scroll-view>
      </swiper-item>
    </swiper>
  </view>
</view>